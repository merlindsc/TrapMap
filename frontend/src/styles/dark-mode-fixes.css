/* ============================================================
   TRAPMAP - DARK MODE FIXES
   
   Fix für:
   1. Objects-Seite: Titel "Objekte" unsichtbar
   2. Einstellungen: Inkonsistente Input-Farben
   3. Allgemeine Hell/Dunkel Inkonsistenzen
   
   Pfad: frontend/src/index.css (am Ende einfügen)
   ============================================================ */

/* ============================================================
   BASE: Alles dunkel!
   ============================================================ */
html, body, #root {
  background-color: #0a0a0a !important;
  color: #ffffff !important;
}

/* ============================================================
   PAGE TITLES - Objects, Reports, Settings, etc.
   Der Titel "Objekte" war unsichtbar!
   ============================================================ */
h1, h2, h3, h4, h5, h6 {
  color: #ffffff !important;
}

/* Spezifisch für Seiten-Überschriften */
main > h1,
main > h2,
section > h1,
section > h2,
.page-title,
.page-header h1,
.page-header h2,
[class*="title"],
[class*="Title"] {
  color: #ffffff !important;
}

/* Untertitel / Beschreibungen */
main > p,
.page-subtitle,
.page-description,
.text-muted {
  color: #9ca3af !important;
}

/* ============================================================
   FORM INPUTS - ALLE DUNKEL!
   Einstellungen hatte weiße und dunkle Inputs gemischt
   ============================================================ */
input,
input[type="text"],
input[type="email"],
input[type="tel"],
input[type="number"],
input[type="password"],
input[type="search"],
input[type="url"],
input[type="date"],
input[type="time"],
textarea,
select {
  background-color: #1a1a2e !important;
  background: #1a1a2e !important;
  border: 1px solid #374151 !important;
  color: #ffffff !important;
  -webkit-text-fill-color: #ffffff !important;
}

/* Chrome Autofill Override - macht Felder gelb/weiß */
input:-webkit-autofill,
input:-webkit-autofill:hover,
input:-webkit-autofill:focus,
input:-webkit-autofill:active,
textarea:-webkit-autofill,
select:-webkit-autofill {
  -webkit-box-shadow: 0 0 0 1000px #1a1a2e inset !important;
  -webkit-text-fill-color: #ffffff !important;
  background-color: #1a1a2e !important;
  border: 1px solid #374151 !important;
  transition: background-color 5000s ease-in-out 0s !important;
}

input:focus,
textarea:focus,
select:focus {
  border-color: #6366f1 !important;
  outline: none !important;
  box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2) !important;
}

input::placeholder,
textarea::placeholder {
  color: #6b7280 !important;
  -webkit-text-fill-color: #6b7280 !important;
}

/* Labels */
label {
  color: #9ca3af !important;
}

/* ============================================================
   TAILWIND OVERRIDES
   Tailwind-Klassen die helle Farben setzen
   ============================================================ */
.bg-white {
  background-color: #111827 !important;
}

.bg-gray-50,
.bg-gray-100 {
  background-color: #0d1117 !important;
}

.text-black,
.text-gray-900,
.text-gray-800,
.text-gray-700,
.text-gray-600 {
  color: #ffffff !important;
}

/* ============================================================
   SIDEBAR / BOTTOM SHEET
   ============================================================ */
.maps-sidebar,
.sidebar,
aside {
  background-color: #111827 !important;
}

.sidebar-header {
  background-color: #0d1117 !important;
  border-bottom: 1px solid #1f2937 !important;
}

.sidebar-content {
  background-color: #111827 !important;
}

/* ============================================================
   CARDS & CONTAINERS
   ============================================================ */
.card,
.panel,
[class*="card"],
[class*="Card"] {
  background-color: #111827 !important;
  border: 1px solid #1f2937 !important;
}

/* ============================================================
   DIALOGS & MODALS
   ============================================================ */
.dialog,
.modal,
[role="dialog"],
[class*="dialog"],
[class*="Dialog"],
[class*="modal"],
[class*="Modal"] {
  background-color: #1f2937 !important;
  border: 1px solid #374151 !important;
}

/* ============================================================
   BUTTONS
   ============================================================ */
.btn-primary,
button[type="submit"],
[class*="primary"] {
  background-color: #6366f1 !important;
  color: #ffffff !important;
  border: none !important;
}

.btn-secondary,
[class*="secondary"] {
  background-color: #374151 !important;
  color: #ffffff !important;
}

/* ============================================================
   COLLAPSIBLE SECTIONS (Maps Sidebar)
   ============================================================ */
.collapsible-section {
  background-color: #1a1a2e !important;
  border: 1px solid #1f2937 !important;
  border-radius: 8px;
  margin-bottom: 8px;
}

.collapsible-header {
  background: transparent !important;
  color: #ffffff !important;
  padding: 10px 12px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
}

.collapsible-header:hover {
  background: rgba(255, 255, 255, 0.05) !important;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 8px;
}

.header-title {
  font-weight: 600;
  font-size: 13px;
}

.header-right {
  display: flex;
  align-items: center;
  gap: 6px;
}

.header-count {
  background: rgba(99, 102, 241, 0.2);
  color: #a5b4fc;
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 11px;
  font-weight: 600;
}

.collapsible-section .chevron {
  transition: transform 0.2s;
  color: #6b7280;
}

.collapsible-section.open .chevron {
  transform: rotate(180deg);
}

.collapsible-content {
  padding: 8px;
  background: rgba(0, 0, 0, 0.2) !important;
  border-top: 1px solid rgba(255, 255, 255, 0.05);
}

/* Section Variants */
.collapsible-section.variant-warning .header-count {
  background: rgba(245, 158, 11, 0.2);
  color: #fbbf24;
}

.collapsible-section.variant-map .header-count {
  background: rgba(59, 130, 246, 0.2);
  color: #60a5fa;
}

.collapsible-section.variant-floorplan .header-count {
  background: rgba(139, 92, 246, 0.2);
  color: #a78bfa;
}

.section-empty {
  color: #6b7280;
  font-size: 12px;
  padding: 12px;
  text-align: center;
}

/* ============================================================
   BOX LIST ITEMS (Maps Sidebar)
   ============================================================ */
.box-item,
.box-item-detailed {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;
  background: #1e293b !important;
  border: 1px solid rgba(255, 255, 255, 0.05) !important;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s;
  margin-bottom: 6px;
}

.box-item:hover,
.box-item-detailed:hover {
  background: #334155 !important;
  border-color: rgba(59, 130, 246, 0.3) !important;
}

.box-item.unplaced {
  border-left: 3px solid #f59e0b;
}

.box-item.selected {
  background: rgba(16, 185, 129, 0.15) !important;
  border-color: #10b981 !important;
}

.box-number-badge {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 11px;
  color: #fff;
  flex-shrink: 0;
}

.box-number-badge.green { background: #10b981; }
.box-number-badge.yellow { background: #eab308; }
.box-number-badge.orange { background: #f97316; }
.box-number-badge.red { background: #ef4444; }
.box-number-badge.gray { background: #6b7280; }

.box-item-main {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
  min-width: 0;
}

.box-item-info {
  flex: 1;
  min-width: 0;
}

.box-item-name {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
  font-weight: 600;
  color: #fff;
}

.box-item-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  color: #64748b;
  margin-top: 2px;
}

.box-type {
  color: #9ca3af;
}

.last-scan {
  display: flex;
  align-items: center;
  gap: 3px;
  color: #64748b;
}

.qr-badge,
.qr-badge-small {
  background: rgba(99, 102, 241, 0.2);
  color: #a5b4fc;
  padding: 1px 5px;
  border-radius: 4px;
  font-size: 10px;
  font-family: monospace;
}

.grid-badge {
  background: rgba(139, 92, 246, 0.2);
  color: #a78bfa;
  padding: 1px 5px;
  border-radius: 4px;
  font-size: 10px;
  font-family: monospace;
}

.box-item-right {
  display: flex;
  align-items: center;
  gap: 8px;
}

.status-indicator {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

.status-indicator.green { background: #10b981; }
.status-indicator.yellow { background: #eab308; }
.status-indicator.orange { background: #f97316; }
.status-indicator.red { background: #ef4444; }
.status-indicator.gray { background: #6b7280; }

.item-chevron {
  color: #64748b;
}

.drag-hint {
  font-size: 10px;
  color: #64748b;
}

.flyto-btn {
  padding: 4px;
  background: rgba(59, 130, 246, 0.2);
  border: none;
  border-radius: 4px;
  color: #60a5fa;
  cursor: pointer;
  opacity: 0;
  transition: opacity 0.15s;
}

.box-item-detailed:hover .flyto-btn {
  opacity: 1;
}

.flyto-btn:hover {
  background: rgba(59, 130, 246, 0.4);
}

/* ============================================================
   STATUS LEGEND
   ============================================================ */
.status-legend {
  background: #1a1a2e;
  border-radius: 8px;
  padding: 12px;
  margin-top: 12px;
}

.status-legend h5 {
  font-size: 11px;
  color: #6b7280;
  margin: 0 0 8px 0;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.legend-items {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 6px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 11px;
  color: #9ca3af;
}

.legend-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

/* ============================================================
   SCROLLBARS
   ============================================================ */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: #1a1a2e;
}

::-webkit-scrollbar-thumb {
  background: #374151;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #4b5563;
}

/* ============================================================
   MOBILE BOTTOM SHEET
   ============================================================ */
@media (max-width: 768px) {
  .mobile-sheet,
  .bottom-sheet,
  .maps-sidebar.mobile-sheet {
    background-color: #111827 !important;
    border-radius: 20px 20px 0 0;
  }
  
  .sheet-drag-handle {
    display: block;
    width: 40px;
    height: 5px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 3px;
    margin: 10px auto 6px;
  }
}